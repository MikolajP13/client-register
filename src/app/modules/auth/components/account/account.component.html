@if (userForm) {
<form (ngSubmit)="saveUserData()" [formGroup]="userForm">
  <div>
    <mat-form-field>
      <mat-label>Username</mat-label>
      <input matInput (blur)="updateErrorMessage()" formControlName="username">
      @if (controls.username.invalid) {
      <mat-error>{{usernameErrorMessage()}}</mat-error>
      }
    </mat-form-field>
  </div>
  <div>
    <mat-form-field>
      <mat-label>Email</mat-label>
      <input matInput (blur)="updateErrorMessage()" formControlName="email">
      @if (controls.email.invalid) {
      <mat-error>{{emailErrorMessage()}}</mat-error>
      }
    </mat-form-field>
  </div>
  <div>
    <mat-form-field>
      <mat-label>Country</mat-label>
      <input matInput formControlName="country">
    </mat-form-field>
  </div>
  <div>
    <mat-form-field>
      <mat-label>City</mat-label>
      <input matInput formControlName="city">
    </mat-form-field>
  </div>
  <div>
    <mat-form-field>
      <mat-label>Phone number</mat-label>
      <input matInput formControlName="phoneNumber">
    </mat-form-field>
  </div>
  <div>
    @if (!editMode()) {
    <button type="button" mat-stroked-button class="edit-btn"
      (click)="toggleEditMode()"><mat-icon>edit</mat-icon>Edit</button>
    } @else {
    <button type="button" mat-stroked-button (click)="cancelChanges()"><mat-icon>close</mat-icon>Cancel</button>
    <button type="submit" mat-stroked-button [disabled]="userForm.invalid"><mat-icon>checkmark</mat-icon>Save</button>
    <button type="button" mat-stroked-button (click)="openChangePasswordDialog()"><mat-icon>key</mat-icon>Change password</button>
    }
  </div>
</form>
}