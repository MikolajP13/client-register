<div class="client-form-wrapper mt-3">
  @if(!editMode()) {
    <h3>Add new client</h3>
  }
  <form (ngSubmit)="onAddClient()" [formGroup]="clientForm">
    <div>
      <mat-form-field>
        <mat-label>Firstname</mat-label>
        <input matInput (blur)="updateErrorMessage()" formControlName="firstname">
        @if (controls.firstname.invalid) {
          <mat-error>{{firstnameErrorMessage()}}</mat-error>
        }
      </mat-form-field>
    </div>
    <div>
      <mat-form-field>
        <mat-label>Lastname</mat-label>
        <input matInput (blur)="updateErrorMessage()" formControlName="lastname">
        @if (controls.lastname.invalid) {
          <mat-error>{{lastnameErrorMessage()}}</mat-error>
        }
      </mat-form-field>
    </div>
    <div>
      <mat-form-field>
        <mat-label>Email address</mat-label>
        <input matInput placeholder="example@example.com" (blur)="updateErrorMessage()" formControlName="email">
        @if (controls.email.invalid) {
          <mat-error>{{emailErrorMessage()}}</mat-error>
        }
      </mat-form-field>
    </div>
    <div>
      <!-- <mat-form-field>
        <mat-label>Phone number</mat-label>
        <input matInput (blur)="updateErrorMessage()" formControlName="phone">
        @if (controls.phone.invalid) {
          <mat-error>{{phoneErrorMessage()}}</mat-error>
        }
      </mat-form-field> -->
    <app-phone-control formControlName="phone"/>
    </div>
    <div>
      <mat-form-field>
        <mat-label>Address</mat-label>
        <input matInput (blur)="updateErrorMessage()" formControlName="address">
        @if (controls.address.invalid) {
          <mat-error>{{addressErrorMessage()}}</mat-error>
        }
      </mat-form-field>
    </div>
    <div>
      <mat-form-field>
        <mat-label>Postcode</mat-label>
        <input matInput (blur)="updateErrorMessage()" formControlName="postcode">
        @if (controls.postcode.invalid) {
          <mat-error>{{postcodeErrorMessage()}}</mat-error>
        }
      </mat-form-field>
    </div>
    <div class="d-flex justify-content-end">
      @if(editMode()){
        <button type="button" mat-stroked-button color="warn" (click)="emitCloseDialog()">Cancel</button>
      }
      <button type="submit" mat-stroked-button class="mx-1" [disabled]="clientForm.invalid" >{{ !editMode() ? 'Add client' : 'Edit client'}}</button>
    </div>
  </form>
</div>
